<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><title>Табло для ТВ</title><style>@keyframes pulse{0%{opacity:1}50%{opacity:.4}100%{opacity:1}}html,body{margin:0;padding:0;height:100vh;width:100vw;overflow:hidden;font-family:'Segoe UI','Arial',sans-serif;font-weight:900;user-select:none;color:#fff}.container{display:flex;width:100%;height:100%}.player-panel{width:50%;height:100%;display:flex;flex-direction:column;justify-content:space-around;align-items:center;text-align:center;box-sizing:border-box;padding:4vh 0}#player1{background-color:var(--p1-color,#000)}#player2{background-color:var(--p2-color,#20b2aa)}.name-container{display:flex;align-items:center;justify-content:center;gap:25px}.name{display:flex;flex-direction:column;line-height:1.1}.name-line-1{font-size:8vh;font-weight:700}.name-line-2{font-size:7vh;font-weight:400}.serve-indicator{font-size:8vh;visibility:hidden}.serve-active{visibility:visible;animation:pulse 1.5s infinite ease-in-out}.score{font-size:55vh;line-height:1}.sets{font-size:12vh;color:#f4c724}</style></head>
<body>
    <div class="container">
        <div class="player-panel" id="player1"><div class="sets">0</div><div class="score">0</div><div class="name-container"><div class="serve-indicator">●</div><div class="name"><div class="name-line-1">Игрок</div><div class="name-line-2">1</div></div></div></div>
        <div class="player-panel" id="player2"><div class="sets">0</div><div class="score">0</div><div class="name-container"><div class="name"><div class="name-line-1">Игрок</div><div class="name-line-2">2</div></div><div class="serve-indicator">●</div></div></div>
    </div>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script><script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>
    <script>
        const firebaseConfig = {
  apiKey: "AIzaSyDTxZWC9Txxg4hHkpMkKOoq6eyZ-QHlCt4",
  authDomain: "gtr-cup-court-2.firebaseapp.com",
  projectId: "gtr-cup-court-2",
  storageBucket: "gtr-cup-court-2.firebasestorage.app",
  messagingSenderId: "5588116973",
  appId: "1:5588116973:web:f0c9ef08514426b2e633e4"
};
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const urlParams = new URLSearchParams(window.location.search);
        const tableId = urlParams.get('table') || '1';
        const firebasePath = `gameState_Table${tableId}`;
        const stateRef = database.ref(firebasePath);
        const scoreEls=[document.querySelector("#player1 .score"),document.querySelector("#player2 .score")],setEls=[document.querySelector("#player1 .sets"),document.querySelector("#player2 .sets")],serveEls=[document.querySelector("#player1 .serve-indicator"),document.querySelector("#player2 .serve-indicator")],nameLine1Els=[document.querySelector("#player1 .name-line-1"),document.querySelector("#player2 .name-line-1")],nameLine2Els=[document.querySelector("#player1 .name-line-2"),document.querySelector("#player2 .name-line-2")];
        function updateDisplay(e){const t={scores:[0,0],sets:[0,0],server:1,initialServer:1,names:["Игрок 1","Игрок 2"],colorAssignment:"default"};const a={...t,...e};scoreEls[0].textContent=a.scores[0],scoreEls[1].textContent=a.scores[1],setEls[0].textContent=a.sets[0],setEls[1].textContent=a.sets[1],a.names.forEach((e,t)=>{const a=e.split(" "),o=a[0]||"",n=a.slice(1).join(" ")||"";nameLine1Els[t].textContent=o,nameLine2Els[t].textContent=n}),serveEls[0].classList.toggle("serve-active",1===a.server),serveEls[1].classList.toggle("serve-active",2===a.server);const o="#000000",n="#20B2AA";"swapped"===a.colorAssignment?(document.documentElement.style.setProperty("--p1-color",n),document.documentElement.style.setProperty("--p2-color",o)):(document.documentElement.style.setProperty("--p1-color",o),document.documentElement.style.setProperty("--p2-color",n))}
        stateRef.on("value",e=>{updateDisplay(e.val())});
    </script>
</body>
</html>
